---
#- name: Uninstall nginx
#  become: yes
#  yum:
#    name: nginx
#    state: absent

- name: Install nginx
  become: yes
  yum:
    name: nginx
    state: present
  notify: Restart nginx

- name: Copy conf file with change nginx port to {{nginx_port}}
  become: yes
  template:
    src: overide_nginx.conf
    dest: /etc/nginx/conf.d/default.conf
  notify: Restart nginx

#- name: force all notified handlers to run at this point, not waiting for normal sync points
- meta: flush_handlers

#- name: Starting nginx service
#  become: yes
#  service:
#    name: nginx
#    state: started
#    enabled: yes


#- name: Hit the nginx server
#  uri:
#    url: http://192.168.33.10:{{nginx_port}}
#    status_code: 200